{% extends "base.html" %}
{% block content %}
<h2>Panel del Paciente</h2>
<p>Hola, {{ paciente.nombre }} ({{ paciente.id }})</p>

<section class="grid-2">
  <div>
    <h3>Agendar Cita</h3>
    <form method="post" action="{{ url_for('paciente_agendar') }}" class="form">
      <label>Médico
        <select name="medico_id">
          {% for m in medicos %}<option value="{{ m.id }}">{{ m.nombre }} ({{ m.especialidad }})</option>{% endfor %}
        </select>
      </label>
      <label>Fecha/Hora <input name="fecha" placeholder="2025-09-10 09:00"></label>
      <label>Prioridad
        <select name="prioridad">
          <option>1</option><option>2</option><option selected>3</option><option>4</option><option>5</option>
        </select>
      </label>
      <button class="btn" type="submit">Agendar</button>
    </form>
  </div>
  <div>
    <h3>Mi Historial</h3>
    <a class="btn-outline" href="{{ url_for('paciente_historial') }}">Actualizar</a>
    <ul class="list">
      {% if historial %}
        {% for c in historial %}
          <li>{{ c.fecha }} — {{ c.diag }} ({{ c.tratamiento }})</li>
        {% endfor %}
      {% else %}
        <li>Sin registros</li>
      {% endif %}
    </ul>
  </div>
</section>

<section class="grid-2">
  <div>
    <h3>Buscar Médicos (Prefijo)</h3>
    <form method="get" action="{{ url_for('buscar') }}" class="form">
      <input type="hidden" name="tipo" value="medico">
      <label>Prefijo <input name="q" placeholder="Dr."></label>
      <button class="btn" type="submit">Buscar</button>
    </form>
  </div>
  <div>
    <h3>Recomendaciones</h3>
    <ul class="list"><li>Hidratación</li><li>Chequeo anual</li></ul>
  </div>
</section>
<form method="post" action="{{ url_for('deshacer') }}"><button class="btn-outline">Deshacer última acción</button></form>
{% endblock %}
